<!doctype html>
<html lang="en">

<head>
  <title>&lt;model-viewer&gt; template</title>
  <meta charset="utf-8">
  <meta name="description" content="&lt;model-viewer&gt; template">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link type="text/css" href="./styles1.css" rel="stylesheet" />
  <!-- OPTIONAL: The :focus-visible polyfill removes the focus ring for some input types -->
  <script src="https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js" defer></script>
</head>

<body>
  <!-- <model-viewer> HTML element -->
  <model-viewer id="mv1" src="../glbs/blood-vessel-anatomy.glb" ar ar-modes="webxr scene-viewer quick-look"
    camera-controls poster="poster.webp" shadow-intensity="1" camera-orbit="-41.13deg 55.33deg 2.741m"
    field-of-view="24.45deg">


    <button class="Hotspot" slot="hotspot-1" id="mv1" data-orbit="-93.49deg 101.6deg 35.21m" field-of-view="30deg"
      data-target="-0.67m 3.027m 11.53m" data-surface="0 0 11008 11007 11005 0.778 0.061 0.161"
      data-visibility-attribute="visible">1
      <div class="HotspotAnnotation"></div>

      <div class="HotspotAnnotation">
        <p class="title">Vein</p>
      </div>

    </button>

    <button class="Hotspot" slot="hotspot-2" id="mv1" data-orbit="-81.64deg 100.5deg 35.21m" field-of-view="30deg"
      data-target="-0.7m 2.954m 0.4824m" data-surface="0 0 4610 4606 4607 0.199 0.748 0.054"
      data-visibility-attribute="visible">2
      <div class="HotspotAnnotation">
        <p class="title">Artery</p>
      </div>
    </button>

    <button class="Hotspot" slot="hotspot-3" id="mv1" data-orbit="-89.67deg 102deg 35.21m" field-of-view="30deg"
      data-target="-0.75m 5.053m 11.36m" data-surface="0 0 9948 10451 9953 0.072 0.778 0.150"
      data-visibility-attribute="visible">3
      <div class="HotspotAnnotation">
        <p class="title">To Heart</p>
      </div>
    </button>

    <button class="Hotspot" slot="hotspot-4" id="mv1" data-orbit="-81.64deg 100.5deg 35.21m" field-of-view="30deg"
      data-target="-0.73m 5.158m 0.1688m" data-surface="0 0 6690 6870 6871 0.209 0.596 0.195"
      data-visibility-attribute="visible">4
      <div class="HotspotAnnotation">
        <p class="title">From Heart</p>
      </div>
    </button>

    <button class="Hotspot" slot="hotspot-5" id="mv1" data-orbit="-98.46deg 87.43deg 19.09m" field-of-view="12deg"
      data-target="-2.23m 1.086m 5.906m" data-surface="0 0 580 3976 3974 0.012 0.967 0.021"
      data-visibility-attribute="visible">5
      <div class="HotspotAnnotation">
        <p class="title">Capillaries</p>
      </div>
    </button>

    <div class="progress-bar hide" slot="progress-bar">
      <div class="update-bar"></div>
    </div>
    <button slot="ar-button" id="ar-button">
      View in your space
    </button>
    <div id="ar-prompt">
      <img src="https://modelviewer.dev/shared-assets/icons/hand.png">
    </div>

    <div class="pagination">

    </div>
    <div class="listPopup" style="display:none"></div>

    <!-- <div class="description-box">
      <p class="title">Left Coronary Artery</p>
      <p>The left coronary artery originates from the left aortic sinus of the ascending aorta.</p>
      <p>The artery divides into its two terminal branches: the anterior interventricular branch and the circumflex
        branch.</p>
    </div> -->

  </model-viewer>



  <script type="module">
    const modelViewer2 = document.querySelector("#mv1");
    const annotationClicked = (annotation) => {
      let dataset = annotation.dataset;
      console.log("pkp:  ~ file: index2.html:76 ~ annotationClicked ~ dataset", dataset)
      modelViewer2.cameraTarget = dataset.target;
      // Initial Camera Position = camera-orbit
      modelViewer2.cameraOrbit = dataset.orbit;
      modelViewer2.fieldOfView = '0deg';
      // modelViewer2.fieldOfView = dataset.view;
      // modelViewer2.querySelectorAll('button').forEach((hotspot) => {
      //   hotspot.classList.remove('active')
      // })
      // annotation.classList.toggle('active');

      // console.log(annotation);
    }
    const navBtnClicked = (arrow) => {
      console.log("pkp:  ~ file: index.html:197 ~ navBtnClicked ~ arrow", arrow)
      let dataset = arrow.dataset;

    }

    modelViewer2.querySelectorAll('button.Hotspot').forEach((hotspot) => {
      console.log("pkp:  ~ file: index2.html:48 ~ modelViewer2.querySelectorAll ~ hotspot", hotspot)
      hotspot.addEventListener('click', () => annotationClicked(hotspot));

    });

    modelViewer2.querySelectorAll('button.arrow').forEach((arrow) => {
      console.log("pkp:  ~ file: index.html:222 ~ modelViewer2.querySelectorAll ~ arrow", arrow)
      arrow.addEventListener('click', () => navBtnClicked(arrow));

    });


    // window.addEventListener('click', (e) => {
    //   document.querySelectorAll('.Hotspot').forEach((hotspot) => {
    //     hotspot.classList.remove('active')
    //   })
    //   if (e.target.classList.contains('Hotspot')) {
    //     e.target.classList.add('active')
    //   }

    // })


    $(document).ready(function () {
      var ap = new Controls(annotationClicked);
      ap.init();
    })




  </script>


  <style type="text/css">
    .Hotspot {
      background: #484848;
      border: none;
      border-radius: 50%;
      box-sizing: border-box;
      box-shadow: 0 2px 4px rgba(85, 85, 85, 0.25);
      color: rgba(255, 255, 255, 0.8);
      border: 1px solid #ffffffb9;
      display: block;
      font-family: Futura, Helvetica Neue, sans-serif;
      font-size: 11px;
      font-weight: 700;
      /* max-width: 128px; */
      overflow-wrap: break-word;
      padding: 0;
      position: absolute;
      width: 22px;
      height: 22px;
      transform: translate3d(-50%, -50%, 0);
      transition: all 0.2s;
    }

    .Hotspot.active {
      z-index: 999;
    }

    .Hotspot:hover {
      color: #56adff;
      box-shadow: 0 0 10px #56adff;
      border-color: #56adff;

    }

    .listPopup {
      background: rgba(0, 0, 0, 0.5);
      position: absolute;
      top: 50%;
      left: 25%;
      width: 215px;
      height: 277px;
      overflow: auto;
      color: #ffffff;
    }

    .labelTitle {
      cursor: pointer;
    }
  </style>

  <script src="script.js"></script>
  <script src="./js/controls.js"></script>
  <script src="./js/jquery-1.12.4.min.js"></script>

  <!-- <script>
     $(document).ready(function() {
            var ap = new Controls(annotationClicked);
            ap.init();
        })
  </script> -->

  <!-- Loads <model-viewer> for browsers: -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</body>

</html>