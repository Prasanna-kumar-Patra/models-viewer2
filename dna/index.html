<!doctype html>
<html lang="en">

<head>
  <title>&lt;model-viewer&gt; template</title>
  <meta charset="utf-8">
  <meta name="description" content="&lt;model-viewer&gt; template">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link type="text/css" href="./styles1.css" rel="stylesheet" />
  <!-- OPTIONAL: The :focus-visible polyfill removes the focus ring for some input types -->
  <script src="https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js" defer></script>
</head>

<body>
  <!-- <model-viewer> HTML element -->
  <model-viewer id="mv1" src="../glbs/dna.glb" ar ar-modes="webxr scene-viewer quick-look"
    camera-controls poster="poster.webp" shadow-intensity="1" camera-orbit="14.48deg 88.24deg 1.773m" field-of-view="29.26deg">


    <!-- <button class="Hotspot" slot="hotspot-1" data-orbit="-41.51deg 58.47deg 2.741m" field-of-view="24.45deg"
      data-target="-0.09m 0.1146m 0.317m" data-surface="28 0 21451 21566 21567 0.528 0.292 0.180"
      data-visibility-attribute="visible">
      1<div class="HotspotAnnotation">Ascending Aorta</div>
    </button> -->
    <button class="Hotspot" id="mv1" data-audio="myAudio1" slot="hotspot-1" data-surface="32 0 14 50 19 0.332 0.467 0.201"
    data-orbit="18.61deg 48.11deg 1.795m" field-of-view="30deg" data-target="-0.07m -0.08m -0.43m" data-visibility-attribute="visible">
        1<div class="HotspotAnnotation">
            <p class="title">Adenine (A)</p>
            <p> “Adenine (A) is one of four chemical bases in DNA, with the other three being cytosine (C), guanine (G), and thymine (T). Within the DNA molecule, adenine bases located on one strand form chemical bonds with thymine bases on the opposite strand. The sequence of four DNA bases encodes the cell’s genetic instructions. A form of adenine called adenosine triphosphate (ATP) serves as an energy storage molecule and is used to power many chemical reactions within the cell.” (Adenine)</p>
        </div>
    </button>


    <button class="Hotspot" id="mv1" data-audio="myAudio2" slot="hotspot-2" data-surface="14 0 14 50 19 0.283 0.325 0.392" data-orbit="14.48deg 88.24deg 1.315m" field-of-view="17.57deg" data-target="0m 0.27m -0.09m"
    data-visibility-attribute="visible">2
        <div class="HotspotAnnotation">
            <p class="title">Cytosine (C)</p>
            <p>“Cytosine (C) is one of four chemical bases in DNA, the other three being adenine (A), guanine (G), and thymine (T). Within the DNA molecule, cytosine bases located on one strand form chemical bonds with guanine bases on the opposite strand. The sequence of four DNA bases encodes the cell’s genetic instructions.” (Cytosine)</p>
            </div>
    </button>

    <button class="Hotspot" slot="hotspot-3" data-audio="myAudio3" data-surface="19 0 51 10 15 0.419 0.124 0.456" id="mv1" data-orbit="139.8deg 108.5deg 1.773m" field-of-view="29.26deg" data-target="-0.01m 0.27m -0.30m" data-visibility-attribute="visible">3
      <div class="HotspotAnnotation">
          <p class="title">Guanine (G)</p>
          <p>“Guanine (G) is one of four chemical bases in DNA, with the other three being adenine (A), cytosine (C), and thymine (T). Within the DNA molecule, guanine bases located on one strand form chemical bonds with cytosine bases on the opposite strand. The sequence of four DNA bases encodes the cell’s genetic instructions.” (Guanine)</p></div>
  </button>

    <button class="Hotspot" data-audio="myAudio4" slot="hotspot-4" data-surface="31 0 51 15 44 0.238 0.360 0.402" id="mv1" data-orbit="-169.7deg 99.7deg 1.315m" field-of-view="17.57deg" data-target="-0.13m 0.28m -0.09m" data-visibility-attribute="visible">4
      <div class="HotspotAnnotation">
          <p class="title">Thymine (T)</p>
          <p>
              “Thymine (T) is one of four chemical bases in DNA, the other three being adenine (A), cytosine (C), and guanine (G). Within the DNA molecule, thymine bases located on one strand form chemical bonds with adenine bases on the opposite strand. The sequence of four DNA bases encodes the cell’s genetic instructions.” (Thymine)
          </p>
          </div>
  </button>


  <button class="Hotspot"  data-audio="myAudio5" slot="hotspot-5" data-surface="3 0 1015 1017 1055 0.036 0.049 0.916" id="mv1" data-orbit="14.48deg 88.24deg 1.773m" field-of-view="29.26deg" data-target="0m 0.21m -0.07124m" data-visibility-attribute="visible">
    5<div class="HotspotAnnotation">
        <p class="title">Sugar-Phosphate Backbone</p>
        <p></p>
        </div>
</button>

    <div class="progress-bar hide" slot="progress-bar">
      <div class="update-bar"></div>
    </div>
    <button slot="ar-button" id="ar-button">
      View in your space
    </button>
    <div id="ar-prompt">
      <img src="https://modelviewer.dev/shared-assets/icons/hand.png">
    </div>

    <div class="pagination">

    </div>
    <div class="listPopup" style="display:none"></div>

    <!-- <div class="description-box">
      <p class="title">Left Coronary Artery</p>
      <p>The left coronary artery originates from the left aortic sinus of the ascending aorta.</p>
      <p>The artery divides into its two terminal branches: the anterior interventricular branch and the circumflex
        branch.</p>
    </div> -->

  </model-viewer>



  <script type="module">
    var ap='';
    const modelViewer2 = document.querySelector("#mv1");
    const annotationClicked = (annotation) => {
      let dataset = annotation.dataset;
      console.log("pkp:  ~ file: index2.html:76 ~ annotationClicked ~ dataset", dataset)
      modelViewer2.cameraTarget = dataset.target;
      // Initial Camera Position = camera-orbit
      modelViewer2.cameraOrbit = dataset.orbit;
      modelViewer2.fieldOfView = '0deg';
      ap.playAudio(dataset.audio, "from module1");
      // modelViewer2.fieldOfView = dataset.view;
      // modelViewer2.querySelectorAll('button').forEach((hotspot) => {
      //   hotspot.classList.remove('active')
      // })
      // annotation.classList.toggle('active');

      // console.log(annotation);
    }
    const navBtnClicked = (arrow) => {
      console.log("pkp:  ~ file: index.html:197 ~ navBtnClicked ~ arrow", arrow)
      let dataset = arrow.dataset;

    }

    modelViewer2.querySelectorAll('button.Hotspot').forEach((hotspot) => {
      console.log("pkp:  ~ file: index2.html:48 ~ modelViewer2.querySelectorAll ~ hotspot", hotspot)
      hotspot.addEventListener('click', () => annotationClicked(hotspot));

    });

    modelViewer2.querySelectorAll('button.arrow').forEach((arrow) => {
      console.log("pkp:  ~ file: index.html:222 ~ modelViewer2.querySelectorAll ~ arrow", arrow)
      arrow.addEventListener('click', () => navBtnClicked(arrow));

    });


    // window.addEventListener('click', (e) => {
    //   document.querySelectorAll('.Hotspot').forEach((hotspot) => {
    //     hotspot.classList.remove('active')
    //   })
    //   if (e.target.classList.contains('Hotspot')) {
    //     e.target.classList.add('active')
    //   }

    // })


    $(document).ready(function () {
      ap = new Controls(annotationClicked);
      ap.init();
    })




  </script>


  <style type="text/css">
    .Hotspot {
      background: #484848;
      border: none;
      border-radius: 50%;
      box-sizing: border-box;
      box-shadow: 0 2px 4px rgba(85, 85, 85, 0.25);
      color: rgba(255, 255, 255, 0.8);
      border: 1px solid #ffffffb9;
      display: block;
      font-family: Futura, Helvetica Neue, sans-serif;
      font-size: 11px;
      font-weight: 700;
      /* max-width: 128px; */
      overflow-wrap: break-word;
      padding: 0;
      position: absolute;
      width: 22px;
      height: 22px;
      transform: translate3d(-50%, -50%, 0);
      transition: all 0.2s;
    }

    .Hotspot.active {
      z-index: 999;
    }

    .Hotspot:hover {
      color: #56adff;
      box-shadow: 0 0 10px #56adff;
      border-color: #56adff;

    }

    .listPopup {
      background: rgba(0, 0, 0, 0.5);
      position: absolute;
      top: 50%;
      left: 25%;
      width: 215px;
      height: 277px;
      overflow: auto;
      color: #ffffff;
    }

    .labelTitle {
      cursor: pointer;
    }
  </style>

  <script src="script.js"></script>
  <script src="./js/controls.js"></script>
  <script src="./js/jquery-1.12.4.min.js"></script>

  <!-- <script>
     $(document).ready(function() {
            var ap = new Controls(annotationClicked);
            ap.init();
        })
  </script> -->

  <!-- Loads <model-viewer> for browsers: -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</body>

</html>