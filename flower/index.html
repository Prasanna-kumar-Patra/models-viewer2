<!doctype html>
<html lang="en">

<head>
  <title>&lt;model-viewer&gt; template</title>
  <meta charset="utf-8">
  <meta name="description" content="&lt;model-viewer&gt; template">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link type="text/css" href="./styles1.css" rel="stylesheet" />
  <!-- OPTIONAL: The :focus-visible polyfill removes the focus ring for some input types -->
  <script src="https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js" defer></script>
</head>

<body>
  <audio src="" id="myAudio1"></audio>
  <!-- <model-viewer> HTML element -->
  <model-viewer id="mv1" src="../glbs/Parts of a Flower Cross section.glb" ar ar-modes="webxr scene-viewer quick-look"
    camera-controls poster="poster.webp" shadow-intensity="1" camera-orbit="-41.13deg 55.33deg 2.741m"
    field-of-view="24.45deg">


    <!-- <button class="Hotspot" slot="hotspot-1" data-orbit="-41.51deg 58.47deg 2.741m" field-of-view="24.45deg"
      data-target="-0.09m 0.1146m 0.317m" data-surface="28 0 21451 21566 21567 0.528 0.292 0.180"
      data-visibility-attribute="visible">
      1<div class="HotspotAnnotation">Ascending Aorta</div>
    </button> -->
    <button class="Hotspot" slot="hotspot-1" data-audio="myAudio1" id="mv1" data-orbit="5.495deg 71.76deg 0.1639m" field-of-view="15.41deg"
      data-target="0m -0.005325m 0.003837m" data-surface="1 0 4271 4272 4273 0.241 0.261 0.498"
      data-visibility-attribute="visible">1
      <div class="HotspotAnnotation">
        <p class="title">Pistil</p>
        <p>The ovule producing part of a flower. The ovary often supports a long style,
          topped by a stigma. The mature ovary is a fruit, and the mature ovule is a seed. Stigma: The part of the
          pistil where
          pollen germinates. Ovary: The enlarged basal portion of the pistil where ovules are produced.</p>
      </div>
    </button>

    <button class="Hotspot" slot="hotspot-2" data-audio="myAudio2" id="mv1" data-orbit="5.495deg 71.76deg 0.1844m" field-of-view="18.2deg"
      data-target="0m 0.01793m 0.005315m" data-surface="1 0 20764 20767 20355 0.527 0.424 0.049"
      data-visibility-attribute="visible">2
      <div class="HotspotAnnotation">
        <p class="title">Stigma</p>
      </div>
    </button>

    <button class="Hotspot" slot="hotspot-3" data-audio="myAudio3" id="mv1" data-orbit="5.495deg 71.76deg 0.1639m" field-of-view="15.41deg"
      data-target="0m 0.005321m 0.003997m" data-surface="1 0 6362 6363 6364 0.216 0.375 0.409"
      data-visibility-attribute="visible">3
      <div class="HotspotAnnotation">
        <p class="title">Pollen Tube</p>
      </div>
      </div>
    </button>

    <button class="Hotspot" slot="hotspot-4" data-audio="myAudio4" id="mv1" data-orbit="-4.06deg 74.06deg 0.1844m" field-of-view="18.2deg"
      data-target="0.02m -0.04482m -0.004407m" data-surface="3 0 8552 8553 8554 0.067 0.096 0.838"
      data-visibility-attribute="visible">4
      <div class="HotspotAnnotation">
        <p class="title">Leaf</p>
      </div>
    </button>

    <button class="Hotspot" slot="hotspot-5" data-audio="myAudio5" id="mv1" data-orbit="-9.793deg 89.73deg 0.2048m" field-of-view="21.5deg"
      data-target="0.04m 0.004296m -0.01278m" data-surface="2 0 5858 5860 5619 0.508 0.332 0.160"
      data-visibility-attribute="visible">5
      <div class="HotspotAnnotation">
        <p class="title">Petal</p>Petal</div>
    </button>

    <button class="Hotspot" slot="hotspot-6" data-audio="myAudio6" id="mv1" data-orbit="-15.91deg 54.95deg 0.1639m" field-of-view="15.4deg"
      data-target="-0.02m -0.01394m 0.003625m" data-surface="3 0 6277 6276 6278 0.440 0.487 0.073"
      data-visibility-attribute="visible">6
      <div class="HotspotAnnotation">
        <p class="title">Sepal</p>
      </div>
    </button>

    <button class="Hotspot" slot="hotspot-7" data-audio="myAudio7" id="mv1" data-orbit="5.495deg 71.76deg 0.2253m" field-of-view="25.39deg"
      data-target="-0.01m 0.02176m 0.002251m" data-surface="0 0 1900 1901 1895 0.514 0.471 0.015"
      data-visibility-attribute="visible">7
      <div class="HotspotAnnotation">
        <p class="title">Stamen</p>
      </div>
    </button>

    <button class="Hotspot" slot="hotspot-8" data-audio="myAudio8" id="mv1" data-orbit="5.495deg 71.76deg 0.2253m" field-of-view="25.39deg"
      data-target="0m -0.03649m 0.002996m" data-surface="3 0 1927 1874 1872 0.138 0.638 0.224"
      data-visibility-attribute="visible">
      8<div class="HotspotAnnotation">
        <p class="title">Stem</p>
      </div>
    </button>

    <button class="Hotspot" slot="hotspot-9" data-audio="myAudio9" id="mv1" data-orbit="5.495deg 71.76deg 0.1639m" field-of-view="15.41deg"
      data-target="0m -0.01474m 0.003497m" data-surface="1 0 9116 9117 9050 0.408 0.159 0.433"
      data-visibility-attribute="visible">
      9<div class="HotspotAnnotation">
        <p class="title">Ovary</p>
      </div>
    </button>



    <div class="progress-bar hide" slot="progress-bar">
      <div class="update-bar"></div>
    </div>
    <button slot="ar-button" id="ar-button">
      View in your space
    </button>
    <div id="ar-prompt">
      <img src="https://modelviewer.dev/shared-assets/icons/hand.png">
    </div>




    <div class="pagination">
      <!-- <button class="arrow arrow-left">◂</button>
      <label>Left Coronary Artery</label>
      <button class="arrow arrow-right" >▸</button> -->
    </div>
    <div class="listPopup" style="display:none"></div>

    <!-- <div class="description-box">
      <p class="title">Left Coronary Artery</p>
      <p>The left coronary artery originates from the left aortic sinus of the ascending aorta.</p>
      <p>The artery divides into its two terminal branches: the anterior interventricular branch and the circumflex
        branch.</p>
    </div> -->

  </model-viewer>



  <script type="module">
     
      var ap = '';
    const modelViewer2 = document.querySelector("#mv1");
   // const audios = document.getElementsByTagName("audio");
    const annotationClicked = (annotation, callee) => {
      let dataset = annotation.dataset;
      //console.log("pkp:  ~ file: index2.html:76 ~ annotationClicked ~ callee", callee)
      modelViewer2.cameraTarget = dataset.target;
      // Initial Camera Position = camera-orbit
      modelViewer2.cameraOrbit = dataset.orbit;
      modelViewer2.fieldOfView = '0deg';
      console.log("dataset.audio-->",dataset.audio)
      ap.playAudio(dataset.audio,"from module1");
      // modelViewer2.fieldOfView = dataset.view;
      // modelViewer2.querySelectorAll('button').forEach((hotspot) => {
      //   hotspot.classList.remove('active')
      // })
      // annotation.classList.toggle('active');

      // console.log(annotation);
    }
    const navBtnClicked = (arrow) => {
      console.log("pkp:  ~ file: index.html:197 ~ navBtnClicked ~ arrow", arrow)
      let dataset = arrow.dataset;

    }

    modelViewer2.querySelectorAll('button.Hotspot').forEach((hotspot) => {
      console.log("pkp:  ~ file: index2.html:48 ~ modelViewer2.querySelectorAll ~ hotspot", hotspot)
      hotspot.addEventListener('click', () => annotationClicked(hotspot,"query selector"));

    });

    modelViewer2.querySelectorAll('button.arrow').forEach((arrow) => {
      console.log("pkp:  ~ file: index.html:222 ~ modelViewer2.querySelectorAll ~ arrow", arrow)
      arrow.addEventListener('click', () => navBtnClicked(arrow));

    });


    // window.addEventListener('click', (e) => {
    //   document.querySelectorAll('.Hotspot').forEach((hotspot) => {
    //     hotspot.classList.remove('active')
    //   })
    //   if (e.target.classList.contains('Hotspot')) {
    //     e.target.classList.add('active')
    //   }

    // })


   
    $(document).ready(function () {
       ap = new Controls(annotationClicked);
      ap.init();
    })




  </script>


  <style type="text/css">
    .Hotspot {
      background: #484848;
      border: none;
      border-radius: 50%;
      box-sizing: border-box;
      box-shadow: 0 2px 4px rgba(85, 85, 85, 0.25);
      color: rgba(255, 255, 255, 0.8);
      border: 1px solid #ffffffb9;
      display: block;
      font-family: Futura, Helvetica Neue, sans-serif;
      font-size: 11px;
      font-weight: 700;
      /* max-width: 128px; */
      overflow-wrap: break-word;
      padding: 0;
      position: absolute;
      width: 22px;
      height: 22px;
      transform: translate3d(-50%, -50%, 0);
      transition: all 0.2s;
    }

    .Hotspot.active {
      z-index: 999;
    }

    .Hotspot:hover {
      color: #56adff;
      box-shadow: 0 0 10px #56adff;
      border-color: #56adff;

    }

    .listPopup {
      background: rgba(0, 0, 0, 0.5);
      position: absolute;
      top: 50%;
      left: 25%;
      width: 215px;
      height: 277px;
      overflow: auto;
      color: #ffffff;
    }

    .labelTitle {
      cursor: pointer;
    }
  </style>

  <script src="script.js"></script>
  <script src="./js/controls.js"></script>
  <script src="./js/jquery-1.12.4.min.js"></script>

  <!-- <script>
     $(document).ready(function() {
            var ap = new Controls(annotationClicked);
            ap.init();
        })
  </script> -->

  <!-- Loads <model-viewer> for browsers: -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</body>

</html>